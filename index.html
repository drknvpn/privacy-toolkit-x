<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy Toolkit X¬≥ | Ultimate Security Suite</title>
    <style>
        :root {
            --main-bg: #0a0a0a;
            --card-bg: #1a1a1a;
            --primary: #00ff88;
            --secondary: #0099ff;
            --text: #e0e0e0;
            --danger: #ff5555;
            --warning: #ffaa00;
        }
        body {
            font-family: 'Courier New', monospace;
            background-color: var(--main-bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        header {
            background-image: linear-gradient(to right, #0066ff, #00ffff);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-bottom: 3px solid var(--primary);
        }
        h1 {
            font-size: 2.5rem;
            margin: 0;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        .card {
            background-color: var(--card-bg);
            border-left: 4px solid var(--secondary);
            border-radius: 0 8px 8px 0;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        .card h2 {
            color: var(--primary);
            margin-top: 0;
            border-bottom: 1px solid #333;
            padding-bottom: 0.5rem;
        }
        pre {
            background-color: black;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            color: #00ff00;
            border: 1px solid #333;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            right: 10px;
            top: 10px;
            background-color: var(--secondary);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-family: inherit;
        }
        .copy-btn:hover {
            background-color: #0077cc;
        }
        .warning {
            background-color: rgba(255, 85, 85, 0.2);
            border-left: 4px solid var(--danger);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }
        .note {
            background-color: rgba(0, 153, 255, 0.2);
            border-left: 4px solid var(--secondary);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }
        footer {
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
            background-color: #111111;
            border-top: 1px solid #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        th {
            background-color: #222;
            color: var(--primary);
        }
        tr:hover {
            background-color: #252525;
        }
        .pill {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-right: 5px;
        }
        .pill-primary {
            background-color: var(--primary);
            color: black;
        }
        .pill-secondary {
            background-color: var(--secondary);
            color: white;
        }
        .pill-warning {
            background-color: var(--warning);
            color: black;
        }
        .pill-danger {
            background-color: var(--danger);
            color: white;
        }
        .github-link {
            color: var(--primary);
            text-decoration: none;
            border-bottom: 1px dashed var(--primary);
        }
        .github-link:hover {
            color: var(--secondary);
            border-bottom-color: var(--secondary);
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background-color: #252525;
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid var(--primary);
        }
        .command {
            font-family: 'Courier New', monospace;
            color: var(--primary);
            background-color: #111;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Privacy Toolkit X¬≥</h1>
            <p>Ultimate Security Suite for Digital Privacy & Ethical Hacking</p>
        </div>
    </header>
    <center><img src="https://raw.githubusercontent.com/drknvpn/privacy-toolkit-x/refs/heads/main/don't%20open/disclaimer.gif" alt="disclaimer"></center><br>
    <div class="container">
        <section id="intro">
            <div class="card">
                <h2>Introduction</h2>
                <p>The Privacy Toolkit X¬≥ is a comprehensive collection of security tools designed for ethical hackers, penetration testers, and privacy-conscious individuals. This suite provides advanced functionalities ranging from simple privacy tools to ultra-paranoid security measures.</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h3>üõ°Ô∏è Core Protection</h3>
                        <ul>
                            <li>Military-grade encryption</li>
                            <li>Real-time threat monitoring</li>
                            <li>Automatic vulnerability patching</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3>üëÅÔ∏è Anti-Surveillance</h3>
                        <ul>
                            <li>Metadata obliteration</li>
                            <li>Digital footprint masking</li>
                            <li>Behavioral camouflage</li>
                        </ul>
                    </div>
                    <div class="feature-card">
                        <h3>‚ö° Paranoid Mode</h3>
                        <ul>
                            <li>Dead Man's Switch</li>
                            <li>USB Device Terminator</li>
                            <li>Emergency data nuke</li>
                        </ul>
                    </div>
                </div>

                <div class="warning">
                    <strong>‚ö† Extreme Warning:</strong> This toolkit contains features that can cause irreversible damage to systems and data. Use only in authorized environments.
                </div>
            </div>
        </section>

        <section id="installation">
            <div class="card">
                <h2>Installation & Setup</h2>
                
                <h3>System Requirements</h3>
                <table>
                    <tr>
                        <th>Component</th>
                        <th>Minimum</th>
                        <th>Recommended</th>
                    </tr>
                    <tr>
                        <td>CPU</td>
                        <td>x86_64 2 cores</td>
                        <td>x86_64 4+ cores with AES-NI</td>
                    </tr>
                    <tr>
                        <td>RAM</td>
                        <td>4GB</td>
                        <td>16GB+</td>
                    </tr>
                    <tr>
                        <td>Storage</td>
                        <td>40GB HDD</td>
                        <td>256GB NVMe SSD</td>
                    </tr>
                    <tr>
                        <td>OS</td>
                        <td>Linux 5.4+</td>
                        <td>Qubes OS or Tails</td>
                    </tr>
                </table>

                <h3>Complete Installation</h3>
                <pre>
# Install dependencies
sudo apt update && sudo apt install -y \
    git python3-pip tor network-manager \
    net-tools libusb-1.0-0-dev \
    python3-dev build-essential libssl-dev \
    libffi-dev libxslt-dev libxml2-dev \
    zlib1g-dev libjpeg-dev libfuzzy-dev \
    sqlite3 libsqlite3-dev

# Clone repository
git clone --depth 1 https://github.com/drknvpn/privacy-toolkit-x.git
cd privacy-toolkit-x

# Install Python packages
pip3 install -r requirements.txt --require-hashes

# Initialize the system
sudo ./install.sh --full --crypto-level=paranoid
                </pre>

                <div class="note">
                    <strong>Note:</strong> For air-gapped systems, download the offline bundle from our releases page.
                </div>
            </div>
        </section>

        <section id="core-features">
            <div class="card">
                <h2>Core Security Features</h2>
                
                <h3>1. Network Protection Suite</h3>
                <table>
                    <tr>
                        <th>Feature</th>
                        <th>Command</th>
                        <th>Risk</th>
                    </tr>
                    <tr>
                        <td>VPN Chain</td>
                        <td><code>vpn --chain 3 --protocol wireguard</code></td>
                        <td><span class="pill pill-primary">Low</span></td>
                    </tr>
                    <tr>
                        <td>Tor Obfuscation</td>
                        <td><code>tor --bridge obfs4 --stealth</code></td>
                        <td><span class="pill pill-primary">Low</span></td>
                    </tr>
                    <tr>
                        <td>DNS Armor</td>
                        <td><code>dns --over-https --filter-malware</code></td>
                        <td><span class="pill pill-primary">Low</span></td>
                    </tr>
                </table>

                <h3>2. Data Protection</h3>
                <table>
                    <tr>
                        <th>Feature</th>
                        <th>Command</th>
                        <th>Risk</th>
                    </tr>
                    <tr>
                        <td>File Encryption</td>
                        <td><code>encrypt --algo aes-512 --keyfile ~/keys/main</code></td>
                        <td><span class="pill pill-primary">Low</span></td>
                    </tr>
                    <tr>
                        <td>Metadata Cleaner</td>
                        <td><code>clean --recursive --shred /home/user/docs</code></td>
                        <td><span class="pill pill-secondary">Medium</span></td>
                    </tr>
                    <tr>
                        <td>Secure Delete</td>
                        <td><code>wipe --method dod7 --passes 35 /dev/sdb1</code></td>
                        <td><span class="pill pill-warning">High</span></td>
                    </tr>
                </table>
            </div>
        </section>

        <section id="advanced-features">
            <div class="card">
                <h2>Advanced Security Modules</h2>
                
                <h3>1. Paranoid Mode</h3>
                <pre>
from toolkit import ParanoidMode

paranoid = ParanoidMode(
    usb_kill=True,          # Destroy suspicious USB devices
    thermal_protection=True,# Mask heat signature (requires hardware)
    rf_shielding=False,     # Enable Faraday cage emulation
    dead_mans_switch={
        'trigger': 'no_activity_1h',
        'action': 'encrypt_and_self_destruct',
        'targets': ['/home', '/etc', '/var/log']
    }
)
paranoid.activate()
                </pre>

                <h3>2. Digital Camouflage System</h3>
                <table>
                    <tr>
                        <th>Component</th>
                        <th>Description</th>
                        <th>Command</th>
                    </tr>
                    <tr>
                        <td>Persona Generator</td>
                        <td>Creates complete digital aliases</td>
                        <td><code>alias --create --type journalist --years 5</code></td>
                    </tr>
                    <tr>
                        <td>Behavior Simulator</td>
                        <td>Mimics human activity patterns</td>
                        <td><code>simulate --behavior corporate --intensity 0.8</code></td>
                    </tr>
                    <tr>
                        <td>Noise Generator</td>
                        <td>Creates fake network traffic</td>
                        <td><code>noise --protocol https --volume high</code></td>
                    </tr>
                </table>

                <div class="warning">
                    <strong>‚ö† Critical:</strong> Paranoid Mode features can cause data loss and hardware damage. Use with extreme caution.
                </div>
            </div>
        </section>

        <section id="emergency">
            <div class="card">
                <h2>Emergency Protocols</h2>
                
                <h3>1. Data Destruction Methods</h3>
                <table>
                    <tr>
                        <th>Method</th>
                        <th>Command</th>
                        <th>Effectiveness</th>
                    </tr>
                    <tr>
                        <td>Quick Wipe</td>
                        <td><code>nuke --fast /dev/sdX</code></td>
                        <td>Basic (1 pass)</td>
                    </tr>
                    <tr>
                        <td>DoD Standard</td>
                        <td><code>nuke --dod /dev/sdX</code></td>
                        <td>High (7 passes)</td>
                    </tr>
                    <tr>
                        <td>Physical Destruction</td>
                        <td><code>nuke --physical --voltage 5.2</code></td>
                        <td>Extreme (Hardware damage)</td>
                    </tr>
                </table>

                <h3>2. Counter-Surveillance</h3>
                <pre>
from toolkit import CounterSurveillance

cs = CounterSurveillance(
    detect_tailgating=True,  # Physical surveillance detection
    rf_scan=True,            # Wireless bug detection
    thermal_scan=False,      # Requires FLIR camera
    emf_protection=True      # Faraday cage activation
)

cs.run_full_sweep()
                </pre>
            </div>
        </section>

        <section id="command-reference">
            <div class="card">
                <h2>Complete Command Reference</h2>
                
                <h3>Core Commands</h3>
                <table>
                    <tr>
                        <th>Command</th>
                        <th>Description</th>
                        <th>Risk</th>
                    </tr>
                    <tr>
                        <td><code>privacy --enable</code></td>
                        <td>Basic privacy protection</td>
                        <td><span class="pill pill-primary">Low</span></td>
                    </tr>
                    <tr>
                        <td><code>network --secure</code></td>
                        <td>Full network lockdown</td>
                        <td><span class="pill pill-secondary">Medium</span></td>
                    </tr>
                    <tr>
                        <td><code>crypto --rotate-keys</code></td>
                        <td>Change all encryption keys</td>
                        <td><span class="pill pill-secondary">Medium</span></td>
                    </tr>
                </table>

                <h3>Advanced Commands</h3>
                <table>
                    <tr>
                        <th>Command</th>
                        <th>Description</th>
                        <th>Risk</th>
                    </tr>
                    <tr>
                        <td><code>paranoid --activate</code></td>
                        <td>Enable extreme security measures</td>
                        <td><span class="pill pill-warning">High</span></td>
                    </tr>
                    <tr>
                        <td><code>usb --terminate-all</code></td>
                        <td>Destroy all connected USB devices</td>
                        <td><span class="pill pill-danger">Extreme</span></td>
                    </tr>
                    <tr>
                        <td><code>system --self-destruct</code></td>
                        <td>Complete system wipe and shutdown</td>
                        <td><span class="pill pill-danger">Extreme</span></td>
                    </tr>
                </table>
            </div>
        </section>

        <section id="ethical-guidelines">
            <div class="card">
                <h2>Ethical Usage Guidelines</h2>
                
                <div class="feature-grid">
                    <div class="feature-card" style="border-left-color: var(--danger);">
                        <h3>‚ùå Strictly Prohibited</h3>
                        <ul>
                            <li>Attacking systems without authorization</li>
                            <li>Bypassing lawful surveillance</li>
                            <li>Creating persistent backdoors</li>
                            <li>Digital harassment</li>
                        </ul>
                    </div>
                    <div class="feature-card" style="border-left-color: var(--primary);">
                        <h3>‚úÖ Approved Uses</h3>
                        <ul>
                            <li>Security research</li>
                            <li>Personal privacy protection</li>
                            <li>Authorized penetration testing</li>
                            <li>Human rights work</li>
                        </ul>
                    </div>
                </div>

                <div class="warning">
                    <strong>Legal Notice:</strong> Violation of ethical guidelines may result in criminal prosecution. All activities are logged.
                </div>
            </div>
        </section>

        <section id="resources">
            <div class="card">
                <h2>Additional Resources</h2>
                
                <h3>Documentation</h3>
                <ul>
                    <li><a href="#" class="github-link">Technical White Paper</a></li>
                    <li><a href="#" class="github-link">API Reference (Coming soon)</a></li>
                    <li><a href="#" class="github-link">Security Audit Reports (Coming soon)</a></li>
                </ul>

                <h3>Community</h3>
                <ul>
                    <li><a href="https://github.com/drknvpn/privacy-toolkit-x" class="github-link">GitHub Repository</a></li>
                    <li><a href="#" class="github-link">Encrypted Forum (Coming soon)</a></li>
                    <li><a href="#" class="github-link">Security Mailing List (Coming soon)</a></li>
                </ul>
            </div>
        </section>

        <section id="xmpp-guide">
            <div class="card">
                <h2>XMPP Server Guide</h2>
                
                <div class="feature-grid">
                    <div class="feature-card" onclick="showTab('xmpp-info')" style="cursor: pointer;">
                        <h3>‚ÑπÔ∏è XMPP Overview</h3>
                        <p>Prosody vs Ejabberd comparison</p>
                    </div>
                    <div class="feature-card" onclick="showTab('prosody-script')" style="cursor: pointer;">
                        <h3>‚öôÔ∏è Prosody Auto-Installer</h3>
                        <p>Automatic setup script</p>
                    </div>
                    <div class="feature-card" onclick="showTab('ejabberd-script')" style="cursor: pointer;">
                        <h3>‚öôÔ∏è Ejabberd Auto-Installer</h3>
                        <p>Automatic setup script</p>
                    </div>
                    <div class="feature-card" onclick="showTab('xmpp-clients')" style="cursor: pointer;">
                        <h3>üì± XMPP Clients</h3>
                        <p>Client apps for all platforms</p>
                    </div>
                </div>

                <!-- XMPP Info Tab -->
                <div id="xmpp-info" class="tab-content" style="display: block;">
                    <h3>Prosody vs Ejabberd: Choosing Your XMPP Server</h3>
                    
                    <table>
                        <tr>
                            <th>Feature</th>
                            <th>Prosody</th>
                            <th>Ejabberd</th>
                        </tr>
                        <tr>
                            <td>Complexity</td>
                            <td>Simple, lightweight</td>
                            <td>More complex, feature-rich</td>
                        </tr>
                        <tr>
                            <td>Performance</td>
                            <td>Good for small-medium deployments</td>
                            <td>Excellent for large-scale deployments</td>
                        </tr>
                        <tr>
                            <td>Configuration</td>
                            <td>Simple Lua config files</td>
                            <td>YAML/Erlang configuration</td>
                        </tr>
                        <tr>
                            <td>Modules</td>
                            <td>Good selection of modules</td>
                            <td>Very extensive module ecosystem</td>
                        </tr>
                        <tr>
                            <td>Best For</td>
                            <td>Personal use, small teams</td>
                            <td>Large organizations, enterprises</td>
                        </tr>
                    </table>

                    <h4>Security Considerations</h4>
                    <ul>
                        <li>Both support TLS encryption (recommended: TLS 1.3)</li>
                        <li>Ejabberd has more advanced access control features</li>
                        <li>Prosody is easier to audit due to simpler codebase</li>
                        <li>Both support OMEMO encryption for end-to-end security</li>
                    </ul>

                    <div class="note">
                        <strong>Recommendation:</strong> Start with Prosody if you're new to XMPP servers. Choose Ejabberd if you need enterprise features or expect high load.
                    </div>
                </div>

                <!-- Prosody Auto-Installer Tab -->
                <div id="prosody-script" class="tab-content" style="display: none;">
                    <h3>Prosody Automatic Installation Script</h3>
                    <pre id="prosody-script-code">
#!/bin/bash
# Privacy Toolkit X¬≥ - Prosody Auto-Installer
# Version 1.2 | Secure XMPP Server Setup

# ----------------------------
# CONFIGURATION
# ----------------------------
DOMAIN="yourdomain.com"           # Change to your domain
ADMIN_USER="admin"                # Admin username
ADMIN_PASSWORD=$(openssl rand -hex 16)  # Random secure password
PROSODY_VERSION="0.12.1"          # Prosody version to install

# ----------------------------
# INSTALLATION
# ----------------------------
echo "[+] Installing dependencies..."
sudo apt update && sudo apt install -y \
    lua5.2 liblua5.2-dev libssl-dev \
    libidn11-dev luarocks git \
    certbot

echo "[+] Installing Prosody..."
wget https://prosody.im/downloads/source/prosody-$PROSODY_VERSION.tar.gz
tar xzf prosody-$PROSODY_VERSION.tar.gz
cd prosody-$PROSODY_VERSION
./configure --prefix=/usr --sysconfdir=/etc --with-lua-include=/usr/include/lua5.2
make
sudo make install

# ----------------------------
# CONFIGURATION
# ----------------------------
echo "[+] Generating certificates..."
sudo certbot certonly --standalone --agree-tos --non-interactive -d $DOMAIN

echo "[+] Creating secure configuration..."
sudo bash -c "cat > /etc/prosody/prosody.cfg.lua << EOF
-- Privacy Toolkit X¬≥ Secure Prosody Config
daemonize = true
pidfile = \"/var/run/prosody/prosody.pid\"

modules_enabled = {
    \"roster\"; \"saslauth\"; \"tls\"; \"dialback\"; \"disco\";
    \"carbons\"; \"pep\"; \"private\"; \"blocklist\"; \"vcard4\";
    \"vcard_legacy\"; \"version\"; \"uptime\"; \"time\"; \"ping\";
    \"register\"; \"admin_adhoc\"; \"mam\"; \"csi\"; \"smacks\";
    \"http_files\"; \"omemo_all_access\";
}

modules_disabled = {
    \"offline\"; -- Disable offline storage for better privacy
}

-- TLS Configuration
ssl = {
    key = \"/etc/letsencrypt/live/$DOMAIN/privkey.pem\";
    certificate = \"/etc/letsencrypt/live/$DOMAIN/fullchain.pem\";
    protocol = \"tlsv1.3+\";
    ciphers = \"HIGH:!aNULL:!MD5:!3DES\";
    dhparam = \"/etc/prosody/certs/dh-2048.pem\";
}

-- Authentication
authentication = \"internal_hashed\"
allow_registration = false -- Disable open registration

-- Logging
log = {
    {levels = {min = \"warn\"}, to = \"console\"};
    {levels = {min = \"error\"}, to = \"file\", filename = \"/var/log/prosody/prosody.err\"};
}

-- VirtualHost
VirtualHost \"$DOMAIN\"
    admins = { \"$ADMIN_USER@$DOMAIN\" }
    modules_enabled = { \"mam\" } -- Enable message archiving
EOF"

echo "[+] Creating admin user..."
sudo prosodyctl register $ADMIN_USER $DOMAIN $ADMIN_PASSWORD

echo "[+] Generating DH parameters (this may take a while)..."
sudo openssl dhparam -out /etc/prosody/certs/dh-2048.pem 2048

echo "[+] Starting Prosody..."
sudo systemctl enable prosody
sudo systemctl start prosody

# ----------------------------
# FIREWALL CONFIGURATION
# ----------------------------
echo "[+] Configuring firewall..."
sudo ufw allow 5222/tcp  # XMPP client connections
sudo ufw allow 5269/tcp  # Server-to-server
sudo ufw allow 5280/tcp  # BOSH/WebSocket
sudo ufw allow 5347/tcp  # XMPP over TLS (XEP-0368)

echo "[+] Installation complete!"
echo "----------------------------------------"
echo "Admin credentials:"
echo "Username: $ADMIN_USER@$DOMAIN"
echo "Password: $ADMIN_PASSWORD"
echo "----------------------------------------"
echo "Recommended next steps:"
echo "1. Configure DNS records (A/AAAA and SRV)"
echo "2. Set up backup for certificates and config"
echo "3. Consider enabling OMEMO for E2EE"
                    </pre>
                    <button class="copy-btn" onclick="copyCode('prosody-script-code')">Copy</button>

                    <h4>Script Features</h4>
                    <ul>
                        <li><strong>Automatic Installation:</strong> Handles all dependencies and compilation</li>
                        <li><strong>Secure Configuration:</strong> Enforces TLS 1.3 and strong ciphers</li>
                        <li><strong>Let's Encrypt Integration:</strong> Automatic certificate setup</li>
                        <li><strong>Admin User Creation:</strong> Generates secure random password</li>
                        <li><strong>Firewall Configuration:</strong> Opens only necessary ports</li>
                    </ul>
                </div>

                <!-- Ejabberd Auto-Installer Tab -->
                <div id="ejabberd-script" class="tab-content" style="display: none;">
                    <h3>Ejabberd Automatic Installation Script</h3>
                    <pre id="ejabberd-script-code">
#!/bin/bash
# Privacy Toolkit X¬≥ - Ejabberd Auto-Installer
# Version 1.3 | Enterprise XMPP Server Setup

# ----------------------------
# CONFIGURATION
# ----------------------------
DOMAIN="yourdomain.com"           # Change to your domain
ADMIN_USER="admin"                # Admin username
ADMIN_PASSWORD=$(openssl rand -hex 16)  # Random secure password
EJABBERD_VERSION="22.05"          # Ejabberd version to install

# ----------------------------
# INSTALLATION
# ----------------------------
echo "[+] Installing dependencies..."
sudo apt update && sudo apt install -y \
    build-essential libexpat1-dev \
    libyaml-dev libssl-dev zlib1g-dev \
    libpam0g-dev libsqlite3-dev \
    libgd-dev libwebp-dev

echo "[+] Installing Erlang..."
wget https://packages.erlang-solutions.com/erlang/debian/pool/esl-erlang_25.3.2.3-1~ubuntu~jammy_amd64.deb
sudo dpkg -i esl-erlang_*.deb
sudo apt-get install -f -y

echo "[+] Installing Ejabberd..."
wget https://www.process-one.net/downloads/ejabberd/$EJABBERD_VERSION/ejabberd-$EJABBERD_VERSION-linux-x86_64.run
chmod +x ejabberd-$EJABBERD_VERSION-linux-x86_64.run
sudo ./ejabberd-$EJABBERD_VERSION-linux-x86_64.run

# ----------------------------
# CONFIGURATION
# ----------------------------
echo "[+] Generating certificates..."
sudo certbot certonly --standalone --agree-tos --non-interactive -d $DOMAIN

echo "[+] Creating secure configuration..."
sudo bash -c "cat > /etc/ejabberd/ejabberd.yml << EOF
# Privacy Toolkit X¬≥ Secure Ejabberd Config
hosts:
  - \"$DOMAIN\"

loglevel: warning
log_rotate_size: 10485760
log_rotate_count: 1

certfiles:
  - \"/etc/letsencrypt/live/$DOMAIN/fullchain.pem\"
  - \"/etc/letsencrypt/live/$DOMAIN/privkey.pem\"

tls_protocol_options:
  - \"no_sslv3\"
  - \"no_tlsv1\"
  - \"no_tlsv1_1\"
  - \"no_tlsv1_2\"
  - \"cipher_server_preference\"
  - \"no_compression\"

c2s_ciphers: \"HIGH:!aNULL:!MD5:!3DES\"
s2s_ciphers: \"HIGH:!aNULL:!MD5:!3DES\"

listen:
  -
    port: 5222
    module: ejabberd_c2s
    tls: true
    max_stanza_size: 65536
    shaper: c2s_shaper
    access: c2s
  -
    port: 5269
    module: ejabberd_s2s_in
    tls: true
    max_stanza_size: 131072
  -
    port: 5280
    module: ejabberd_http
    tls: true
    request_handlers:
      \"/admin\": ejabberd_web_admin
      \"/api\": mod_http_api
      \"/bosh\": mod_bosh
      \"/ws\": mod_websockets
      \"/.well-known/acme-challenge\": ejabberd_acme

acl:
  admin:
    user: \"$ADMIN_USER@$DOMAIN\"

access_rules:
  local:
    allow: local
  c2s:
    deny: blocked
    allow: all
  announce:
    allow: admin
  configure:
    allow: admin
  muc_create:
    allow: local
  pubsub_createnode:
    allow: local
  trusted_network:
    allow: loopback

modules:
  mod_adhoc: {}
  mod_admin_extra: {}
  mod_avatar: {}
  mod_blocking: {}
  mod_bosh: {}
  mod_caps: {}
  mod_carboncopy: {}
  mod_client_state: {}
  mod_disco: {}
  mod_http_api: {}
  mod_last: {}
  mod_mam:
    assume_mam_usage: true
    default: always
  mod_muc:
    host: \"conference.$DOMAIN\"
    access: all
    access_admin: admin
    access_create: all
    access_persistent: all
    default_room_options:
      mam: true
  mod_muc_admin: {}
  mod_offline:
    access_max_user_messages: max_user_offline_messages
  mod_ping: {}
  mod_privacy: {}
  mod_private: {}
  mod_pubsub:
    access_createnode: pubsub_createnode
    plugins:
      - \"flat\"
      - \"pep\"
    force_node_config:
      \"eu.siacs.conversations.axolotl.*\":
        access_model: open
  mod_push: {}
  mod_push_keepalive: {}
  mod_register:
    ip_access: trusted_network
    welcome_message:
      subject: \"Welcome to $DOMAIN XMPP server\"
      body: |-
        Hi,
        Welcome to your new account on $DOMAIN.
    access: register
  mod_roster: {}
  mod_s2s_dialback: {}
  mod_shared_roster: {}
  mod_stream_mgmt: {}
  mod_vcard: {}
  mod_vcard_xupdate: {}
  mod_version: {}
  mod_websockets: {}

shaper:
  normal: 1000
  fast: 50000

shaper_rules:
  max_user_sessions: 10
  max_user_offline_messages: 5000
  c2s_shaper:
    none: admin
    normal: all
  s2s_shaper: fast
EOF"

echo "[+] Creating admin user..."
sudo ejabberdctl register $ADMIN_USER $DOMAIN $ADMIN_PASSWORD

echo "[+] Starting Ejabberd..."
sudo systemctl enable ejabberd
sudo systemctl start ejabberd

# ----------------------------
# FIREWALL CONFIGURATION
# ----------------------------
echo "[+] Configuring firewall..."
sudo ufw allow 5222/tcp  # XMPP client connections
sudo ufw allow 5269/tcp  # Server-to-server
sudo ufw allow 5280/tcp  # BOSH/WebSocket
sudo ufw allow 5443/tcp  # Admin interface

echo "[+] Installation complete!"
echo "----------------------------------------"
echo "Admin credentials:"
echo "Username: $ADMIN_USER@$DOMAIN"
echo "Password: $ADMIN_PASSWORD"
echo "----------------------------------------"
echo "Web Admin: https://$DOMAIN:5280/admin/"
echo "----------------------------------------"
echo "Recommended next steps:"
echo "1. Configure DNS records (A/AAAA and SRV)"
echo "2. Set up database backend (PostgreSQL recommended)"
echo "3. Configure backup strategy"
                    </pre>
                    <button class="copy-btn" onclick="copyCode('ejabberd-script-code')">Copy</button>

                    <h4>Script Features</h4>
                    <ul>
                        <li><strong>Enterprise-Grade Setup:</strong> Configures Ejabberd for production use</li>
                        <li><strong>TLS 1.3 Enforcement:</strong> Highest security standards</li>
                        <li><strong>Module Configuration:</strong> Pre-configured with recommended modules</li>
                        <li><strong>Admin Interface:</strong> Secure web admin setup</li>
                        <li><strong>MAM Support:</strong> Message Archive Management configured</li>
                    </ul>
                </div>

                                <!-- XMPP Clients Tab -->
                                <div id="xmpp-clients" class="tab-content" style="display: none;">
                                    <h3>XMPP Clients for All Platforms</h3>
                                    
                                    <h4>Windows</h4>
                                    <div class="feature-card">
                                        <h5>Gajim</h5>
                                        <p><strong>Pros:</strong> OMEMO support, plugin ecosystem</p>
                                        <p><strong>Cons:</strong> UI somewhat dated</p>
                                        <p><strong>Install:</strong> <a href="https://gajim.org/download/" class="github-link">Download installer</a></p>
                                    </div>
                
                                    <h4>Linux</h4>
                                    <div class="feature-card">
                                        <h5>Dino</h5>
                                        <p><strong>Pros:</strong> Modern UI, native GTK app</p>
                                        <p><strong>Cons:</strong> Less feature-rich than others</p>
                                        <p><strong>Install:</strong> <code>sudo apt install dino-im</code></p>
                                    </div>
                
                                    <h4>macOS</h4>
                                    <div class="feature-card">
                                        <h5>Monal</h5>
                                        <p><strong>Pros:</strong> Native macOS feel, push notifications</p>
                                        <p><strong>Cons:</strong> Some advanced features missing</p>
                                        <p><strong>Install:</strong> <code>brew install --cask monal</code></p>
                                    </div>
                
                                    <h4>Android</h4>
                                    <div class="feature-card">
                                        <h5>Conversations</h5>
                                        <p><strong>Pros:</strong> Best OMEMO support, clean UI</p>
                                        <p><strong>Cons:</strong> Paid app (worth it)</p>
                                        <p><strong>Install:</strong> <a href="https://play.google.com/store/apps/details?id=eu.siacs.conversations" class="github-link">Google Play</a></p>
                                    </div>
                
                                    <h4>iOS</h4>
                                    <div class="feature-card">
                                        <h5>Siskin IM</h5>
                                        <p><strong>Pros:</strong> Feature-rich, push support</p>
                                        <p><strong>Cons:</strong> Subscription model</p>
                                        <p><strong>Install:</strong> <a href="https://apps.apple.com/us/app/siskin-im-xmpp-client/id1448129638" class="github-link">App Store</a></p>
                                    </div>
                
                                    <h4>Cross-Platform</h4>
                                    <div class="feature-card">
                                        <h5>Pidgin (with OMEMO plugin)</h5>
                                        <p><strong>Pros:</strong> Works everywhere, plugin support</p>
                                        <p><strong>Cons:</strong> UI outdated, requires plugin for E2EE</p>
                                        <p><strong>Install:</strong> <code>sudo apt install pidgin pidgin-omemo</code></p>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                
                    <footer>
                        <div class="container">
                            <p>Privacy Toolkit X¬≥ | Ultimate Security Suite</p>
                            <p>For authorized security testing and privacy enhancement only</p>
                            <p>Version 7.2 | Last Updated: April 2025</p>
                        </div>
                    </footer>
                
                    <script>
                        function copyCode(elementId) {
                            const codeElement = document.getElementById(elementId);
                            const textToCopy = codeElement.textContent;
                            
                            navigator.clipboard.writeText(textToCopy).then(() => {
                                const btn = event.target;
                                btn.textContent = "Copied!";
                                setTimeout(() => {
                                    btn.textContent = "Copy";
                                }, 2000);
                            });
                        }
                
                        // Tab switching functionality
                        function showTab(tabId) {
                            // Hide all tab contents
                            document.querySelectorAll('.tab-content').forEach(tab => {
                                tab.style.display = 'none';
                            });
                            
                            // Show selected tab
                            document.getElementById(tabId).style.display = 'block';
                        }
                
                        // Initialize first tab as active
                        document.addEventListener('DOMContentLoaded', function() {
                            showTab('xmpp-info');
                        });
                    </script>
                </body>
                </html>
